{"version":3,"file":"GraphicsContext.js","sources":["../../../../src/scene/graphics/shared/GraphicsContext.ts"],"sourcesContent":["/* eslint-disable max-len */\nimport EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../../color/Color';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { type GCable, type GCData } from '../../../rendering/renderers/shared/GCSystem';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { uid } from '../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Bounds } from '../../container/bounds/Bounds';\nimport { type GpuGraphicsContext } from './GraphicsContextSystem';\nimport { GraphicsPath } from './path/GraphicsPath';\nimport { SVGParser } from './svg/SVGParser';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { TextureDestroyOptions, TypeOrBool } from '../../container/destroyTypes';\nimport type { ConvertedFillStyle, ConvertedStrokeStyle, FillInput, StrokeInput } from './FillTypes';\nimport type { RoundedPoint } from './path/roundShape';\n\nconst tmpPoint = new Point();\n\n/**\n * The mode for batching graphics instructions.\n *\n * It can be:\n * - 'auto': Automatically determines whether to batch based on the number of instructions.\n * - 'batch': Forces batching of all instructions.\n * - 'no-batch': Disables batching, processing each instruction individually.\n * @category scene\n * @advanced\n */\nexport type BatchMode = 'auto' | 'batch' | 'no-batch';\n\n/** @internal */\nexport interface FillInstruction\n{\n    action: 'fill' | 'cut'\n    data: { style: ConvertedFillStyle, path: GraphicsPath, hole?: GraphicsPath }\n}\n\n/** @internal */\nexport interface StrokeInstruction\n{\n    action: 'stroke'\n    data: { style: ConvertedStrokeStyle, path: GraphicsPath, hole?: GraphicsPath }\n}\n\n/** @internal */\nexport interface TextureInstruction\n{\n    action: 'texture'\n    data: {\n        image: Texture,\n\n        dx: number\n        dy: number\n\n        dw: number\n        dh: number\n\n        transform: Matrix\n        alpha: number\n        style: number,\n    }\n}\n\n/** @internal */\nexport type GraphicsInstructions = FillInstruction | StrokeInstruction | TextureInstruction;\n\nconst tempMatrix = new Matrix();\n\n/**\n * The GraphicsContext class allows for the creation of lightweight objects that contain instructions for drawing shapes and paths.\n * It is used internally by the Graphics class to draw shapes and paths, and can be used directly and shared between Graphics objects,\n *\n * This sharing of a `GraphicsContext` means that the intensive task of converting graphics instructions into GPU-ready geometry is done once, and the results are reused,\n * much like sprites reusing textures.\n * @category scene\n * @standard\n */\nexport class GraphicsContext extends EventEmitter<{\n    update: GraphicsContext\n    destroy: GraphicsContext\n    unload: GraphicsContext\n}> implements GCable\n{\n    /** @internal */\n    public _gpuData: Record<number | string, GpuGraphicsContext> = Object.create(null);\n    /** @internal */\n    public _gcData?: GCData;\n    /** If set to true, the resource will be garbage collected automatically when it is not used. */\n    public autoGarbageCollect = true;\n    /** @internal */\n    public _gcLastUsed = -1;\n\n    /** The default fill style to use when none is provided. */\n    public static defaultFillStyle: ConvertedFillStyle = {\n        /** The color to use for the fill. */\n        color: 0xffffff,\n        /** The alpha value to use for the fill. */\n        alpha: 1,\n        /** The texture to use for the fill. */\n        texture: Texture.WHITE,\n        /** The matrix to apply. */\n        matrix: null,\n        /** The fill pattern to use. */\n        fill: null,\n        /** Whether coordinates are 'global' or 'local' */\n        textureSpace: 'local',\n    };\n\n    /** The default stroke style to use when none is provided. */\n    public static defaultStrokeStyle: ConvertedStrokeStyle = {\n        /** The width of the stroke. */\n        width: 1,\n        /** The color to use for the stroke. */\n        color: 0xffffff,\n        /** The alpha value to use for the stroke. */\n        alpha: 1,\n        /** The alignment of the stroke. */\n        alignment: 0.5,\n        /** The miter limit to use. */\n        miterLimit: 10,\n        /** The line cap style to use. */\n        cap: 'butt',\n        /** The line join style to use. */\n        join: 'miter',\n        /** The texture to use for the fill. */\n        texture: Texture.WHITE,\n        /** The matrix to apply. */\n        matrix: null,\n        /** The fill pattern to use. */\n        fill: null,\n        /** Whether coordinates are 'global' or 'local' */\n        textureSpace: 'local',\n        /** If the stroke is a pixel line. */\n        pixelLine: false,\n    };\n\n    /**\n     * unique id for this graphics context\n     * @internal\n     */\n    public readonly uid: number = uid('graphicsContext');\n    /**\n     * Indicates whether content is updated and have to be re-rendered.\n     * @internal\n     */\n    public dirty = true;\n    /** The batch mode for this graphics context. It can be 'auto', 'batch', or 'no-batch'. */\n    public batchMode: BatchMode = 'auto';\n    /** @internal */\n    public instructions: GraphicsInstructions[] = [];\n    /**\n     * Custom shader to apply to the graphics when rendering.\n     * @advanced\n     */\n    public customShader?: Shader;\n\n    /** Whether the graphics context has been destroyed. */\n    public destroyed = false;\n\n    private _activePath: GraphicsPath = new GraphicsPath();\n    private _transform: Matrix = new Matrix();\n\n    private _fillStyle: ConvertedFillStyle = { ...GraphicsContext.defaultFillStyle };\n    private _strokeStyle: ConvertedStrokeStyle = { ...GraphicsContext.defaultStrokeStyle };\n    private _stateStack: { fillStyle: ConvertedFillStyle; strokeStyle: ConvertedStrokeStyle, transform: Matrix }[] = [];\n\n    private _tick = 0;\n\n    private _bounds = new Bounds();\n    private _boundsDirty = true;\n\n    /**\n     * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n     * including the current drawing state, transformations, styles, and instructions.\n     * @returns A new GraphicsContext instance with the same properties and state as this one.\n     */\n    public clone(): GraphicsContext\n    {\n        const clone = new GraphicsContext();\n\n        clone.batchMode = this.batchMode;\n        clone.instructions = this.instructions.slice();\n        clone._activePath = this._activePath.clone();\n        clone._transform = this._transform.clone();\n        clone._fillStyle = { ...this._fillStyle };\n        clone._strokeStyle = { ...this._strokeStyle };\n        clone._stateStack = this._stateStack.slice();\n        clone._bounds = this._bounds.clone();\n        clone._boundsDirty = true;\n\n        return clone;\n    }\n\n    /**\n     * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n     */\n    get fillStyle(): ConvertedFillStyle\n    {\n        return this._fillStyle;\n    }\n\n    set fillStyle(value: FillInput)\n    {\n        this._fillStyle = toFillStyle(value, GraphicsContext.defaultFillStyle);\n    }\n\n    /**\n     * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     */\n    get strokeStyle(): ConvertedStrokeStyle\n    {\n        return this._strokeStyle;\n    }\n\n    set strokeStyle(value: FillInput)\n    {\n        this._strokeStyle = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    }\n\n    /**\n     * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n     * pattern, or a more complex style defined by a FillStyle object.\n     * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n     *                or a FillStyle or ConvertedFillStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setFillStyle(style: FillInput): this\n    {\n        this._fillStyle = toFillStyle(style, GraphicsContext.defaultFillStyle);\n\n        return this;\n    }\n\n    /**\n     * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n     * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n     *                or a StrokeStyle or ConvertedStrokeStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setStrokeStyle(style: StrokeInput): this\n    {\n        this._strokeStyle = toFillStyle(style, GraphicsContext.defaultStrokeStyle) as ConvertedStrokeStyle;\n\n        return this;\n    }\n\n    /**\n     * Adds a texture to the graphics context. This method supports multiple overloads for specifying the texture.\n     * If only a texture is provided, it uses the texture's width and height for drawing.\n     * @param texture - The Texture object to use.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public texture(texture: Texture): this;\n    /**\n     * Adds a texture to the graphics context. This method supports multiple overloads for specifying the texture,\n     * tint, and dimensions. If only a texture is provided, it uses the texture's width and height for drawing.\n     * Additional parameters allow for specifying a tint color, and custom dimensions for the texture drawing area.\n     * @param texture - The Texture object to use.\n     * @param tint - (Optional) A ColorSource to tint the texture. If not provided, defaults to white (0xFFFFFF).\n     * @param dx - (Optional) The x-coordinate in the destination canvas at which to place the top-left corner of\n     * the source image.\n     * @param dy - (Optional) The y-coordinate in the destination canvas at which to place the top-left corner of\n     * the source image.\n     * @param dw - (Optional) The width of the rectangle within the source image to draw onto the destination canvas.\n     * If not provided, uses the texture's frame width.\n     * @param dh - (Optional) The height of the rectangle within the source image to draw onto the destination canvas.\n     * If not provided, uses the texture's frame height.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public texture(texture: Texture, tint?: ColorSource, dx?: number, dy?: number, dw?: number, dh?: number): this;\n    public texture(texture: Texture, tint?: ColorSource, dx?: number, dy?: number, dw?: number, dh?: number): this\n    {\n        this.instructions.push({\n            action: 'texture',\n            data: {\n                image: texture,\n\n                dx: dx || 0,\n                dy: dy || 0,\n\n                dw: dw || texture.frame.width,\n                dh: dh || texture.frame.height,\n\n                transform: this._transform.clone(),\n                alpha: this._fillStyle.alpha,\n                style: (tint || tint === 0) ? Color.shared.setValue(tint).toNumber() : 0xFFFFFF,\n            }\n        });\n\n        this.onUpdate();\n\n        return this;\n    }\n\n    /**\n     * Resets the current path. Any previous path and its commands are discarded and a new path is\n     * started. This is typically called before beginning a new shape or series of drawing commands.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public beginPath(): this\n    {\n        this._activePath = new GraphicsPath();\n\n        return this;\n    }\n\n    /**\n     * Fills the current or given path with the current fill style. This method can optionally take\n     * a color and alpha for a simple fill, or a more complex FillInput object for advanced fills.\n     * @param style - (Optional) The style to fill the path with. Can be a color, gradient, pattern, or a complex style object. If omitted, uses the current fill style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public fill(style?: FillInput): this;\n    /** @deprecated 8.0.0 */\n    public fill(color: ColorSource, alpha: number): this;\n    public fill(style?: FillInput, alpha?: number): this\n    {\n        let path: GraphicsPath;\n\n        const lastInstruction = this.instructions[this.instructions.length - 1];\n\n        if (this._tick === 0 && lastInstruction?.action === 'stroke')\n        {\n            path = lastInstruction.data.path;\n        }\n        else\n        {\n            path = this._activePath.clone();\n        }\n\n        if (!path) return this;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style != null)\n        {\n            if (alpha !== undefined && typeof style === 'number')\n            {\n                // #if _DEBUG\n                deprecation(v8_0_0, 'GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead');\n                // #endif\n\n                style = { color: style, alpha };\n            }\n            this._fillStyle = toFillStyle(style, GraphicsContext.defaultFillStyle);\n        }\n\n        // TODO not a fan of the clone!!\n        this.instructions.push({\n            action: 'fill',\n            // TODO copy fill style!\n            data: { style: this.fillStyle, path }\n        });\n\n        this.onUpdate();\n\n        this._initNextPathLocation();\n        this._tick = 0;\n\n        return this;\n    }\n\n    private _initNextPathLocation()\n    {\n        // Reset the _activePath with the last point of the current path\n        const { x, y } = this._activePath.getLastPoint(Point.shared);\n\n        this._activePath.clear();\n        this._activePath.moveTo(x, y);\n    }\n\n    /**\n     * Strokes the current path with the current stroke style. This method can take an optional\n     * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n     * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public stroke(style?: StrokeInput): this\n    {\n        let path: GraphicsPath;\n\n        const lastInstruction = this.instructions[this.instructions.length - 1];\n\n        if (this._tick === 0 && lastInstruction?.action === 'fill')\n        {\n            path = lastInstruction.data.path;\n        }\n        else\n        {\n            path = this._activePath.clone();\n        }\n\n        if (!path) return this;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style != null)\n        {\n            this._strokeStyle = toStrokeStyle(style, GraphicsContext.defaultStrokeStyle);\n        }\n\n        // TODO not a fan of the clone!!\n        this.instructions.push({\n            action: 'stroke',\n            // TODO copy fill style!\n            data: { style: this.strokeStyle, path }\n        });\n\n        this.onUpdate();\n\n        this._initNextPathLocation();\n        this._tick = 0;\n\n        return this;\n    }\n\n    /**\n     * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n     * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n     * fail to cut correctly!\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public cut(): this\n    {\n        for (let i = 0; i < 2; i++)\n        {\n            const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n\n            const holePath = this._activePath.clone();\n\n            if (lastInstruction)\n            {\n                if (lastInstruction.action === 'stroke' || lastInstruction.action === 'fill')\n                {\n                    if (lastInstruction.data.hole)\n                    {\n                        lastInstruction.data.hole.addPath(holePath);\n                    }\n                    else\n                    {\n                        lastInstruction.data.hole = holePath;\n                        break;\n                    }\n                }\n            }\n        }\n\n        this._initNextPathLocation();\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n     * starting and ending angles, and direction.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The arc's radius.\n     * @param startAngle - The starting angle, in radians.\n     * @param endAngle - The ending angle, in radians.\n     * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arc(\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            radius,\n            startAngle,\n            endAngle,\n            counterclockwise,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the current path with the given control points and radius, connected to the previous point\n     * by a straight line if necessary.\n     * @param x1 - The x-coordinate of the first control point.\n     * @param y1 - The y-coordinate of the first control point.\n     * @param x2 - The x-coordinate of the second control point.\n     * @param y2 - The y-coordinate of the second control point.\n     * @param radius - The arc's radius.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arcTo(\n            (t.a * x1) + (t.c * y1) + t.tx,\n            (t.b * x1) + (t.d * y1) + t.ty,\n            (t.a * x2) + (t.c * y2) + t.tx,\n            (t.b * x2) + (t.d * y2) + t.ty,\n            radius,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcToSvg(\n        rx: number, ry: number,\n        xAxisRotation: number,\n        largeArcFlag: number,\n        sweepFlag: number,\n        x: number, y: number\n    ): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arcToSvg(\n            rx, ry,\n            xAxisRotation, // should we rotate this with transform??\n            largeArcFlag,\n            sweepFlag,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number, smoothness?: number): this\n    {\n        this._tick++;\n\n        // TODO optimize for no transform\n        const t = this._transform;\n\n        this._activePath.bezierCurveTo(\n            (t.a * cp1x) + (t.c * cp1y) + t.tx,\n            (t.b * cp1x) + (t.d * cp1y) + t.ty,\n            (t.a * cp2x) + (t.c * cp2y) + t.tx,\n            (t.b * cp2x) + (t.d * cp2y) + t.ty,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this._tick++;\n\n        this._activePath?.closePath();\n\n        return this;\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number): this\n    {\n        this._tick++;\n\n        this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number): this\n    {\n        this._tick++;\n\n        this._activePath.circle(x, y, radius, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n     * @param path - The `GraphicsPath` to add.\n     * @returns The instance of the current object for chaining.\n     */\n    public path(path: GraphicsPath): this\n    {\n        this._tick++;\n\n        this._activePath.addPath(path, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.lineTo(\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty\n        );\n\n        return this;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        const instructions = this._activePath.instructions;\n\n        const transformedX = (t.a * x) + (t.c * y) + t.tx;\n        const transformedY = (t.b * x) + (t.d * y) + t.ty;\n\n        if (instructions.length === 1 && instructions[0].action === 'moveTo')\n        {\n            instructions[0].data[0] = transformedX;\n            instructions[0].data[1] = transformedY;\n\n            return this;\n        }\n        this._activePath.moveTo(\n            transformedX,\n            transformedY\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cpx - The x-coordinate of the control point.\n     * @param cpy - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, smoothness?: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.quadraticCurveTo(\n            (t.a * cpx) + (t.c * cpy) + t.tx,\n            (t.b * cpx) + (t.d * cpy) + t.ty,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number): this\n    {\n        this._tick++;\n\n        this._activePath.rect(x, y, w, h, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number): this\n    {\n        this._tick++;\n\n        this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n     * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n     * rotated, or translated as needed.\n     * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n     * representing the x and y coordinates, of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     */\n    public poly(points: number[] | PointData[], close?: boolean): this\n    {\n        this._tick++;\n\n        this._activePath.poly(points, close, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation = 0, transform?: Matrix): this\n    {\n        this._tick++;\n        this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(x: number, y: number, radius: number, sides: number, corner: number, rotation?: number): this\n    {\n        this._tick++;\n        this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n\n        return this;\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic?: boolean, smoothness?: number): this\n    {\n        this._tick++;\n        this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this\n    {\n        this._tick++;\n        this._activePath.filletRect(x, y, width, height, fillet);\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this\n    {\n        this._tick++;\n        this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a star shape centered at a specified location. This method allows for the creation\n     *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n     * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n     * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n     * @param x - The x-coordinate of the center of the star.\n     * @param y - The y-coordinate of the center of the star.\n     * @param points - The number of points of the star.\n     * @param radius - The outer radius of the star (distance from the center to the outer points).\n     * @param innerRadius - Optional. The inner radius of the star\n     * (distance from the center to the inner points between the outer points).\n     * If not provided, defaults to half of the `radius`.\n     * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n     * Defaults to 0, meaning one point is directly upward.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public star(x: number, y: number, points: number, radius: number, innerRadius = 0, rotation = 0): this\n    {\n        this._tick++;\n\n        this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n     * defined in SVG format to be drawn within the graphics context.\n     * @param svg - The SVG string to be parsed and rendered.\n     */\n    public svg(svg: string): this\n    {\n        this._tick++;\n\n        SVGParser(svg, this);\n\n        return this;\n    }\n\n    /**\n     * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n     * This includes transformations, fill styles, and stroke styles.\n     */\n    public restore(): this\n    {\n        const state = this._stateStack.pop();\n\n        if (state)\n        {\n            this._transform = state.transform;\n            this._fillStyle = state.fillStyle;\n            this._strokeStyle = state.strokeStyle;\n        }\n\n        return this;\n    }\n\n    /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n    public save(): this\n    {\n        this._stateStack.push({\n            transform: this._transform.clone(),\n            fillStyle: { ...this._fillStyle },\n            strokeStyle: { ...this._strokeStyle },\n        });\n\n        return this;\n    }\n\n    /**\n     * Returns the current transformation matrix of the graphics context.\n     * @returns The current transformation matrix.\n     */\n    public getTransform(): Matrix\n    {\n        return this._transform;\n    }\n\n    /**\n     * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public resetTransform(): this\n    {\n        this._transform.identity();\n\n        return this;\n    }\n\n    /**\n     * Applies a rotation transformation to the graphics context around the current origin.\n     * @param angle - The angle of rotation in radians.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public rotate(angle: number): this\n    {\n        this._transform.rotate(angle);\n\n        return this;\n    }\n\n    /**\n     * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n     * @param x - The scale factor in the horizontal direction.\n     * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public scale(x: number, y: number = x): this\n    {\n        this._transform.scale(x, y);\n\n        return this;\n    }\n\n    /**\n     * Sets the current transformation matrix of the graphics context to the specified matrix or values.\n     * This replaces the current transformation matrix.\n     * @param transform - The matrix to set as the current transformation matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setTransform(transform: Matrix): this;\n    /**\n     * Sets the current transformation matrix of the graphics context to the specified matrix or values.\n     * This replaces the current transformation matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setTransform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public setTransform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this\n    {\n        if (a instanceof Matrix)\n        {\n            this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n\n            return this;\n        }\n\n        this._transform.set(a, b, c, d, dx, dy);\n\n        return this;\n    }\n\n    /**\n     * Applies the specified transformation matrix to the current graphics context by multiplying\n     * the current matrix with the specified matrix.\n     * @param transform - The matrix to apply to the current transformation.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public transform(transform: Matrix): this;\n    /**\n     * Applies the specified transformation matrix to the current graphics context by multiplying\n     * the current matrix with the specified matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public transform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public transform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this\n    {\n        if (a instanceof Matrix)\n        {\n            this._transform.append(a);\n\n            return this;\n        }\n\n        tempMatrix.set(a, b, c, d, dx, dy);\n        this._transform.append(tempMatrix);\n\n        return this;\n    }\n\n    /**\n     * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n     * @param x - The amount to translate in the horizontal direction.\n     * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public translate(x: number, y: number = x): this\n    {\n        this._transform.translate(x, y);\n\n        return this;\n    }\n\n    /**\n     * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n     * and optionally resetting transformations to the identity matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public clear(): this\n    {\n        this._activePath.clear();\n        this.instructions.length = 0;\n        this.resetTransform();\n\n        this.onUpdate();\n\n        return this;\n    }\n\n    protected onUpdate(): void\n    {\n        // Every time the content is updated - we must invalidate bounds, regardless rendering `dirty` state.\n        // Bounds can be read multiple times per frame.\n        this._boundsDirty = true;\n\n        // Visual updates happen only once per frame.\n        // There is no need to dispatch an `update` in if it was already dispatched this frame.\n        if (this.dirty) return;\n        this.emit('update', this, 0x10);\n        this.dirty = true;\n    }\n\n    /** The bounds of the graphic shape. */\n    get bounds(): Bounds\n    {\n        if (!this._boundsDirty) return this._bounds;\n\n        this._boundsDirty = false;\n\n        // TODO switch to idy dirty with tick..\n        const bounds = this._bounds;\n\n        bounds.clear();\n\n        for (let i = 0; i < this.instructions.length; i++)\n        {\n            const instruction = this.instructions[i];\n            const action = instruction.action;\n\n            if (action === 'fill')\n            {\n                const data = instruction.data as FillInstruction['data'];\n\n                bounds.addBounds(data.path.bounds);\n            }\n            else if (action === 'texture')\n            {\n                const data = instruction.data as TextureInstruction['data'];\n\n                bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n            }\n            if (action === 'stroke')\n            {\n                const data = instruction.data as StrokeInstruction['data'];\n\n                const alignment = data.style.alignment;\n\n                const outerPadding = (data.style.width * (1 - alignment));\n\n                const _bounds = data.path.bounds;\n\n                bounds.addFrame(\n                    _bounds.minX - outerPadding,\n                    _bounds.minY - outerPadding,\n                    _bounds.maxX + outerPadding,\n                    _bounds.maxY + outerPadding\n                );\n            }\n        }\n\n        return bounds;\n    }\n\n    /**\n     * Check to see if a point is contained within this geometry.\n     * @param point - Point to check if it's contained.\n     * @returns {boolean} `true` if the point is contained within geometry.\n     */\n    public containsPoint(point: PointData): boolean\n    {\n        // early out if the bounding box is not hit\n        if (!this.bounds.containsPoint(point.x, point.y)) return false;\n\n        const instructions = this.instructions;\n        let hasHit = false;\n\n        for (let k = 0; k < instructions.length; k++)\n        {\n            const instruction = instructions[k];\n\n            const data = instruction.data as FillInstruction['data'];\n            const path = data.path;\n\n            if (!instruction.action || !path) continue;\n\n            const style = data.style;\n            const shapes = path.shapePath.shapePrimitives;\n\n            for (let i = 0; i < shapes.length; i++)\n            {\n                const shape = shapes[i].shape;\n\n                if (!style || !shape) continue;\n\n                const transform = shapes[i].transform;\n\n                const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n\n                if (instruction.action === 'fill')\n                {\n                    hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n                }\n                else\n                {\n                    const strokeStyle = (style as ConvertedStrokeStyle);\n\n                    hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, strokeStyle.width, strokeStyle.alignment);\n                }\n\n                const holes = data.hole;\n\n                if (holes)\n                {\n                    const holeShapes = holes.shapePath?.shapePrimitives;\n\n                    if (holeShapes)\n                    {\n                        for (let j = 0; j < holeShapes.length; j++)\n                        {\n                            if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y))\n                            {\n                                hasHit = false;\n                            }\n                        }\n                    }\n                }\n\n                if (hasHit)\n                {\n                    return true;\n                }\n            }\n        }\n\n        return hasHit;\n    }\n\n    /** Unloads the GPU data from the graphics context. */\n    public unload(): void\n    {\n        this.emit('unload', this);\n        for (const key in this._gpuData)\n        {\n            this._gpuData[key]?.destroy();\n        }\n        this._gpuData = Object.create(null);\n    }\n\n    /**\n     * Destroys the GraphicsData object.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * context.destroy();\n     * context.destroy(true);\n     * context.destroy({ texture: true, textureSource: true });\n     */\n    public destroy(options: TypeOrBool<TextureDestroyOptions> = false): void\n    {\n        if (this.destroyed) return;\n        this.destroyed = true;\n        this._stateStack.length = 0;\n        this._transform = null;\n\n        this.unload();\n        this.emit('destroy', this);\n        this.removeAllListeners();\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            if (this._fillStyle.texture)\n            {\n                this._fillStyle.fill && 'uid' in this._fillStyle.fill\n                    ? this._fillStyle.fill.destroy()\n                    : this._fillStyle.texture.destroy(destroyTextureSource);\n            }\n\n            if (this._strokeStyle.texture)\n            {\n                this._strokeStyle.fill && 'uid' in this._strokeStyle.fill\n                    ? this._strokeStyle.fill.destroy()\n                    : this._strokeStyle.texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this._fillStyle = null;\n        this._strokeStyle = null;\n\n        this.instructions = null;\n        this._activePath = null;\n        this._bounds = null;\n        this._stateStack = null;\n        this.customShader = null;\n        this._transform = null;\n    }\n}\n"],"names":["Point","Matrix","uid","GraphicsPath","Bounds","toFillStyle","toStrokeStyle","Color","deprecation","v8_0_0","SVGParser","Texture"],"mappings":";;;;;;;;;;;;;;;AAqBA,MAAM,QAAA,GAAW,IAAIA,WAAA,EAAM;AAkD3B,MAAM,UAAA,GAAa,IAAIC,aAAA,EAAO;AAWvB,MAAM,gBAAA,GAAN,MAAM,gBAAA,SAAwB,YAAA,CAKrC;AAAA,EALO,WAAA,GAAA;AAAA,IAAA,KAAA,CAAA,GAAA,SAAA,CAAA;AAOH;AAAA,IAAA,IAAA,CAAO,QAAA,mBAAwD,MAAA,CAAO,MAAA,CAAO,IAAI,CAAA;AAIjF;AAAA,IAAA,IAAA,CAAO,kBAAA,GAAqB,IAAA;AAE5B;AAAA,IAAA,IAAA,CAAO,WAAA,GAAc,CAAA,CAAA;AAkDrB;AAAA;AAAA;AAAA;AAAA,IAAA,IAAA,CAAgB,GAAA,GAAcC,QAAI,iBAAiB,CAAA;AAKnD;AAAA;AAAA;AAAA;AAAA,IAAA,IAAA,CAAO,KAAA,GAAQ,IAAA;AAEf;AAAA,IAAA,IAAA,CAAO,SAAA,GAAuB,MAAA;AAE9B;AAAA,IAAA,IAAA,CAAO,eAAuC,EAAC;AAQ/C;AAAA,IAAA,IAAA,CAAO,SAAA,GAAY,KAAA;AAEnB,IAAA,IAAA,CAAQ,WAAA,GAA4B,IAAIC,yBAAA,EAAa;AACrD,IAAA,IAAA,CAAQ,UAAA,GAAqB,IAAIF,aAAA,EAAO;AAExC,IAAA,IAAA,CAAQ,UAAA,GAAiC,EAAE,GAAG,gBAAA,CAAgB,gBAAA,EAAiB;AAC/E,IAAA,IAAA,CAAQ,YAAA,GAAqC,EAAE,GAAG,gBAAA,CAAgB,kBAAA,EAAmB;AACrF,IAAA,IAAA,CAAQ,cAAyG,EAAC;AAElH,IAAA,IAAA,CAAQ,KAAA,GAAQ,CAAA;AAEhB,IAAA,IAAA,CAAQ,OAAA,GAAU,IAAIG,aAAA,EAAO;AAC7B,IAAA,IAAA,CAAQ,YAAA,GAAe,IAAA;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOhB,KAAA,GACP;AACI,IAAA,MAAM,KAAA,GAAQ,IAAI,gBAAA,EAAgB;AAElC,IAAA,KAAA,CAAM,YAAY,IAAA,CAAK,SAAA;AACvB,IAAA,KAAA,CAAM,YAAA,GAAe,IAAA,CAAK,YAAA,CAAa,KAAA,EAAM;AAC7C,IAAA,KAAA,CAAM,WAAA,GAAc,IAAA,CAAK,WAAA,CAAY,KAAA,EAAM;AAC3C,IAAA,KAAA,CAAM,UAAA,GAAa,IAAA,CAAK,UAAA,CAAW,KAAA,EAAM;AACzC,IAAA,KAAA,CAAM,UAAA,GAAa,EAAE,GAAG,IAAA,CAAK,UAAA,EAAW;AACxC,IAAA,KAAA,CAAM,YAAA,GAAe,EAAE,GAAG,IAAA,CAAK,YAAA,EAAa;AAC5C,IAAA,KAAA,CAAM,WAAA,GAAc,IAAA,CAAK,WAAA,CAAY,KAAA,EAAM;AAC3C,IAAA,KAAA,CAAM,OAAA,GAAU,IAAA,CAAK,OAAA,CAAQ,KAAA,EAAM;AACnC,IAAA,KAAA,CAAM,YAAA,GAAe,IAAA;AAErB,IAAA,OAAO,KAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,SAAA,GACJ;AACI,IAAA,OAAO,IAAA,CAAK,UAAA;AAAA,EAChB;AAAA,EAEA,IAAI,UAAU,KAAA,EACd;AACI,IAAA,IAAA,CAAK,UAAA,GAAaC,uCAAA,CAAY,KAAA,EAAO,gBAAA,CAAgB,gBAAgB,CAAA;AAAA,EACzE;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,WAAA,GACJ;AACI,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EAChB;AAAA,EAEA,IAAI,YAAY,KAAA,EAChB;AACI,IAAA,IAAA,CAAK,YAAA,GAAeC,yCAAA,CAAc,KAAA,EAAO,gBAAA,CAAgB,kBAAkB,CAAA;AAAA,EAC/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASO,aAAa,KAAA,EACpB;AACI,IAAA,IAAA,CAAK,UAAA,GAAaD,uCAAA,CAAY,KAAA,EAAO,gBAAA,CAAgB,gBAAgB,CAAA;AAErE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASO,eAAe,KAAA,EACtB;AACI,IAAA,IAAA,CAAK,YAAA,GAAeA,uCAAA,CAAY,KAAA,EAAO,gBAAA,CAAgB,kBAAkB,CAAA;AAEzE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA,EA0BO,QAAQ,OAAA,EAAkB,IAAA,EAAoB,EAAA,EAAa,EAAA,EAAa,IAAa,EAAA,EAC5F;AACI,IAAA,IAAA,CAAK,aAAa,IAAA,CAAK;AAAA,MACnB,MAAA,EAAQ,SAAA;AAAA,MACR,IAAA,EAAM;AAAA,QACF,KAAA,EAAO,OAAA;AAAA,QAEP,IAAI,EAAA,IAAM,CAAA;AAAA,QACV,IAAI,EAAA,IAAM,CAAA;AAAA,QAEV,EAAA,EAAI,EAAA,IAAM,OAAA,CAAQ,KAAA,CAAM,KAAA;AAAA,QACxB,EAAA,EAAI,EAAA,IAAM,OAAA,CAAQ,KAAA,CAAM,MAAA;AAAA,QAExB,SAAA,EAAW,IAAA,CAAK,UAAA,CAAW,KAAA,EAAM;AAAA,QACjC,KAAA,EAAO,KAAK,UAAA,CAAW,KAAA;AAAA,QACvB,KAAA,EAAQ,IAAA,IAAQ,IAAA,KAAS,CAAA,GAAKE,WAAA,CAAM,OAAO,QAAA,CAAS,IAAI,CAAA,CAAE,QAAA,EAAS,GAAI;AAAA;AAC3E,KACH,CAAA;AAED,IAAA,IAAA,CAAK,QAAA,EAAS;AAEd,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,SAAA,GACP;AACI,IAAA,IAAA,CAAK,WAAA,GAAc,IAAIJ,yBAAA,EAAa;AAEpC,IAAA,OAAO,IAAA;AAAA,EACX;AAAA,EAWO,IAAA,CAAK,OAAmB,KAAA,EAC/B;AACI,IAAA,IAAI,IAAA;AAEJ,IAAA,MAAM,kBAAkB,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,YAAA,CAAa,SAAS,CAAC,CAAA;AAEtE,IAAA,IAAI,IAAA,CAAK,KAAA,KAAU,CAAA,IAAK,eAAA,EAAiB,WAAW,QAAA,EACpD;AACI,MAAA,IAAA,GAAO,gBAAgB,IAAA,CAAK,IAAA;AAAA,IAChC,CAAA,MAEA;AACI,MAAA,IAAA,GAAO,IAAA,CAAK,YAAY,KAAA,EAAM;AAAA,IAClC;AAEA,IAAA,IAAI,CAAC,MAAM,OAAO,IAAA;AAGlB,IAAA,IAAI,SAAS,IAAA,EACb;AACI,MAAA,IAAI,KAAA,KAAU,KAAA,CAAA,IAAa,OAAO,KAAA,KAAU,QAAA,EAC5C;AAEI,QAAAK,uBAAA,CAAYC,oBAAQ,sGAAsG,CAAA;AAG1H,QAAA,KAAA,GAAQ,EAAE,KAAA,EAAO,KAAA,EAAO,KAAA,EAAM;AAAA,MAClC;AACA,MAAA,IAAA,CAAK,UAAA,GAAaJ,uCAAA,CAAY,KAAA,EAAO,gBAAA,CAAgB,gBAAgB,CAAA;AAAA,IACzE;AAGA,IAAA,IAAA,CAAK,aAAa,IAAA,CAAK;AAAA,MACnB,MAAA,EAAQ,MAAA;AAAA;AAAA,MAER,IAAA,EAAM,EAAE,KAAA,EAAO,IAAA,CAAK,WAAW,IAAA;AAAK,KACvC,CAAA;AAED,IAAA,IAAA,CAAK,QAAA,EAAS;AAEd,IAAA,IAAA,CAAK,qBAAA,EAAsB;AAC3B,IAAA,IAAA,CAAK,KAAA,GAAQ,CAAA;AAEb,IAAA,OAAO,IAAA;AAAA,EACX;AAAA,EAEQ,qBAAA,GACR;AAEI,IAAA,MAAM,EAAE,GAAG,CAAA,EAAE,GAAI,KAAK,WAAA,CAAY,YAAA,CAAaL,YAAM,MAAM,CAAA;AAE3D,IAAA,IAAA,CAAK,YAAY,KAAA,EAAM;AACvB,IAAA,IAAA,CAAK,WAAA,CAAY,MAAA,CAAO,CAAA,EAAG,CAAC,CAAA;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQO,OAAO,KAAA,EACd;AACI,IAAA,IAAI,IAAA;AAEJ,IAAA,MAAM,kBAAkB,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,YAAA,CAAa,SAAS,CAAC,CAAA;AAEtE,IAAA,IAAI,IAAA,CAAK,KAAA,KAAU,CAAA,IAAK,eAAA,EAAiB,WAAW,MAAA,EACpD;AACI,MAAA,IAAA,GAAO,gBAAgB,IAAA,CAAK,IAAA;AAAA,IAChC,CAAA,MAEA;AACI,MAAA,IAAA,GAAO,IAAA,CAAK,YAAY,KAAA,EAAM;AAAA,IAClC;AAEA,IAAA,IAAI,CAAC,MAAM,OAAO,IAAA;AAGlB,IAAA,IAAI,SAAS,IAAA,EACb;AACI,MAAA,IAAA,CAAK,YAAA,GAAeM,yCAAA,CAAc,KAAA,EAAO,gBAAA,CAAgB,kBAAkB,CAAA;AAAA,IAC/E;AAGA,IAAA,IAAA,CAAK,aAAa,IAAA,CAAK;AAAA,MACnB,MAAA,EAAQ,QAAA;AAAA;AAAA,MAER,IAAA,EAAM,EAAE,KAAA,EAAO,IAAA,CAAK,aAAa,IAAA;AAAK,KACzC,CAAA;AAED,IAAA,IAAA,CAAK,QAAA,EAAS;AAEd,IAAA,IAAA,CAAK,qBAAA,EAAsB;AAC3B,IAAA,IAAA,CAAK,KAAA,GAAQ,CAAA;AAEb,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQO,GAAA,GACP;AACI,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,CAAA,EAAG,CAAA,EAAA,EACvB;AACI,MAAA,MAAM,kBAAkB,IAAA,CAAK,YAAA,CAAa,KAAK,YAAA,CAAa,MAAA,GAAS,IAAI,CAAC,CAAA;AAE1E,MAAA,MAAM,QAAA,GAAW,IAAA,CAAK,WAAA,CAAY,KAAA,EAAM;AAExC,MAAA,IAAI,eAAA,EACJ;AACI,QAAA,IAAI,eAAA,CAAgB,MAAA,KAAW,QAAA,IAAY,eAAA,CAAgB,WAAW,MAAA,EACtE;AACI,UAAA,IAAI,eAAA,CAAgB,KAAK,IAAA,EACzB;AACI,YAAA,eAAA,CAAgB,IAAA,CAAK,IAAA,CAAK,OAAA,CAAQ,QAAQ,CAAA;AAAA,UAC9C,CAAA,MAEA;AACI,YAAA,eAAA,CAAgB,KAAK,IAAA,GAAO,QAAA;AAC5B,YAAA;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAEA,IAAA,IAAA,CAAK,qBAAA,EAAsB;AAE3B,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaO,IAAI,CAAA,EAAW,CAAA,EAAW,MAAA,EAAgB,UAAA,EAAoB,UAAkB,gBAAA,EACvF;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,IAAA,CAAK,WAAA,CAAY,GAAA;AAAA,MACZ,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MACzB,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MAC1B,MAAA;AAAA,MACA,UAAA;AAAA,MACA,QAAA;AAAA,MACA;AAAA,KACJ;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYO,KAAA,CAAM,EAAA,EAAY,EAAA,EAAY,EAAA,EAAY,IAAY,MAAA,EAC7D;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,IAAA,CAAK,WAAA,CAAY,KAAA;AAAA,MACZ,EAAE,CAAA,GAAI,EAAA,GAAO,CAAA,CAAE,CAAA,GAAI,KAAM,CAAA,CAAE,EAAA;AAAA,MAC3B,EAAE,CAAA,GAAI,EAAA,GAAO,CAAA,CAAE,CAAA,GAAI,KAAM,CAAA,CAAE,EAAA;AAAA,MAC3B,EAAE,CAAA,GAAI,EAAA,GAAO,CAAA,CAAE,CAAA,GAAI,KAAM,CAAA,CAAE,EAAA;AAAA,MAC3B,EAAE,CAAA,GAAI,EAAA,GAAO,CAAA,CAAE,CAAA,GAAI,KAAM,CAAA,CAAE,EAAA;AAAA,MAC5B;AAAA,KACJ;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcO,SACH,EAAA,EAAY,EAAA,EACZ,eACA,YAAA,EACA,SAAA,EACA,GAAW,CAAA,EAEf;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,IAAA,CAAK,WAAA,CAAY,QAAA;AAAA,MACb,EAAA;AAAA,MAAI,EAAA;AAAA,MACJ,aAAA;AAAA;AAAA,MACA,YAAA;AAAA,MACA,SAAA;AAAA,MACC,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MACzB,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE;AAAA,KAC9B;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeO,cAAc,IAAA,EAAc,IAAA,EAAc,MAAc,IAAA,EAAc,CAAA,EAAW,GAAW,UAAA,EACnG;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAGL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,IAAA,CAAK,WAAA,CAAY,aAAA;AAAA,MACZ,EAAE,CAAA,GAAI,IAAA,GAAS,CAAA,CAAE,CAAA,GAAI,OAAQ,CAAA,CAAE,EAAA;AAAA,MAC/B,EAAE,CAAA,GAAI,IAAA,GAAS,CAAA,CAAE,CAAA,GAAI,OAAQ,CAAA,CAAE,EAAA;AAAA,MAC/B,EAAE,CAAA,GAAI,IAAA,GAAS,CAAA,CAAE,CAAA,GAAI,OAAQ,CAAA,CAAE,EAAA;AAAA,MAC/B,EAAE,CAAA,GAAI,IAAA,GAAS,CAAA,CAAE,CAAA,GAAI,OAAQ,CAAA,CAAE,EAAA;AAAA,MAC/B,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MACzB,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MAC1B;AAAA,KACJ;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,SAAA,GACP;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,aAAa,SAAA,EAAU;AAE5B,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWO,OAAA,CAAQ,CAAA,EAAW,CAAA,EAAW,OAAA,EAAiB,OAAA,EACtD;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,WAAA,CAAY,QAAQ,CAAA,EAAG,CAAA,EAAG,SAAS,OAAA,EAAS,IAAA,CAAK,UAAA,CAAW,KAAA,EAAO,CAAA;AAExE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASO,MAAA,CAAO,CAAA,EAAW,CAAA,EAAW,MAAA,EACpC;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,WAAA,CAAY,OAAO,CAAA,EAAG,CAAA,EAAG,QAAQ,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA;AAE7D,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,KAAK,IAAA,EACZ;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,YAAY,OAAA,CAAQ,IAAA,EAAM,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA;AAEtD,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQO,MAAA,CAAO,GAAW,CAAA,EACzB;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,IAAA,CAAK,WAAA,CAAY,MAAA;AAAA,MACZ,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MACzB,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE;AAAA,KAC9B;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQO,MAAA,CAAO,GAAW,CAAA,EACzB;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,MAAM,YAAA,GAAe,KAAK,WAAA,CAAY,YAAA;AAEtC,IAAA,MAAM,eAAgB,CAAA,CAAE,CAAA,GAAI,IAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAC/C,IAAA,MAAM,eAAgB,CAAA,CAAE,CAAA,GAAI,IAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAE/C,IAAA,IAAI,aAAa,MAAA,KAAW,CAAA,IAAK,aAAa,CAAC,CAAA,CAAE,WAAW,QAAA,EAC5D;AACI,MAAA,YAAA,CAAa,CAAC,CAAA,CAAE,IAAA,CAAK,CAAC,CAAA,GAAI,YAAA;AAC1B,MAAA,YAAA,CAAa,CAAC,CAAA,CAAE,IAAA,CAAK,CAAC,CAAA,GAAI,YAAA;AAE1B,MAAA,OAAO,IAAA;AAAA,IACX;AACA,IAAA,IAAA,CAAK,WAAA,CAAY,MAAA;AAAA,MACb,YAAA;AAAA,MACA;AAAA,KACJ;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYO,gBAAA,CAAiB,GAAA,EAAa,GAAA,EAAa,CAAA,EAAW,GAAW,UAAA,EACxE;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,MAAM,IAAI,IAAA,CAAK,UAAA;AAEf,IAAA,IAAA,CAAK,WAAA,CAAY,gBAAA;AAAA,MACZ,EAAE,CAAA,GAAI,GAAA,GAAQ,CAAA,CAAE,CAAA,GAAI,MAAO,CAAA,CAAE,EAAA;AAAA,MAC7B,EAAE,CAAA,GAAI,GAAA,GAAQ,CAAA,CAAE,CAAA,GAAI,MAAO,CAAA,CAAE,EAAA;AAAA,MAC7B,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MACzB,EAAE,CAAA,GAAI,CAAA,GAAM,CAAA,CAAE,CAAA,GAAI,IAAK,CAAA,CAAE,EAAA;AAAA,MAC1B;AAAA,KACJ;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUO,IAAA,CAAK,CAAA,EAAW,CAAA,EAAW,CAAA,EAAW,CAAA,EAC7C;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,WAAA,CAAY,KAAK,CAAA,EAAG,CAAA,EAAG,GAAG,CAAA,EAAG,IAAA,CAAK,UAAA,CAAW,KAAA,EAAO,CAAA;AAEzD,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaO,SAAA,CAAU,CAAA,EAAW,CAAA,EAAW,CAAA,EAAW,GAAW,MAAA,EAC7D;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,WAAA,CAAY,SAAA,CAAU,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,GAAG,MAAA,EAAQ,IAAA,CAAK,UAAA,CAAW,KAAA,EAAO,CAAA;AAEtE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUO,IAAA,CAAK,QAAgC,KAAA,EAC5C;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,YAAY,IAAA,CAAK,MAAA,EAAQ,OAAO,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA;AAE5D,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYO,YAAY,CAAA,EAAW,CAAA,EAAW,QAAgB,KAAA,EAAe,QAAA,GAAW,GAAG,SAAA,EACtF;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AACL,IAAA,IAAA,CAAK,YAAY,WAAA,CAAY,CAAA,EAAG,GAAG,MAAA,EAAQ,KAAA,EAAO,UAAU,SAAS,CAAA;AAErE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaO,UAAU,CAAA,EAAW,CAAA,EAAW,MAAA,EAAgB,KAAA,EAAe,QAAgB,QAAA,EACtF;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AACL,IAAA,IAAA,CAAK,YAAY,SAAA,CAAU,CAAA,EAAG,GAAG,MAAA,EAAQ,KAAA,EAAO,QAAQ,QAAQ,CAAA;AAEhE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeO,UAAA,CAAW,MAAA,EAAwB,MAAA,EAAgB,YAAA,EAAwB,UAAA,EAClF;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AACL,IAAA,IAAA,CAAK,WAAA,CAAY,UAAA,CAAW,MAAA,EAAQ,MAAA,EAAQ,cAAc,UAAU,CAAA;AAEpE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWO,UAAA,CAAW,CAAA,EAAW,CAAA,EAAW,KAAA,EAAe,QAAgB,MAAA,EACvE;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AACL,IAAA,IAAA,CAAK,YAAY,UAAA,CAAW,CAAA,EAAG,CAAA,EAAG,KAAA,EAAO,QAAQ,MAAM,CAAA;AAEvD,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWO,YAAY,CAAA,EAAW,CAAA,EAAW,KAAA,EAAe,MAAA,EAAgB,SAAiB,SAAA,EACzF;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AACL,IAAA,IAAA,CAAK,YAAY,WAAA,CAAY,CAAA,EAAG,GAAG,KAAA,EAAO,MAAA,EAAQ,SAAS,SAAS,CAAA;AAEpE,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBO,IAAA,CAAK,GAAW,CAAA,EAAW,MAAA,EAAgB,QAAgB,WAAA,GAAc,CAAA,EAAG,WAAW,CAAA,EAC9F;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAA,IAAA,CAAK,WAAA,CAAY,IAAA,CAAK,CAAA,EAAG,CAAA,EAAG,MAAA,EAAQ,MAAA,EAAQ,WAAA,EAAa,QAAA,EAAU,IAAA,CAAK,UAAA,CAAW,KAAA,EAAO,CAAA;AAE1F,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,IAAI,GAAA,EACX;AACI,IAAA,IAAA,CAAK,KAAA,EAAA;AAEL,IAAAI,mBAAA,CAAU,KAAK,IAAI,CAAA;AAEnB,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA,EAMO,OAAA,GACP;AACI,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,WAAA,CAAY,GAAA,EAAI;AAEnC,IAAA,IAAI,KAAA,EACJ;AACI,MAAA,IAAA,CAAK,aAAa,KAAA,CAAM,SAAA;AACxB,MAAA,IAAA,CAAK,aAAa,KAAA,CAAM,SAAA;AACxB,MAAA,IAAA,CAAK,eAAe,KAAA,CAAM,WAAA;AAAA,IAC9B;AAEA,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA,EAGO,IAAA,GACP;AACI,IAAA,IAAA,CAAK,YAAY,IAAA,CAAK;AAAA,MAClB,SAAA,EAAW,IAAA,CAAK,UAAA,CAAW,KAAA,EAAM;AAAA,MACjC,SAAA,EAAW,EAAE,GAAG,IAAA,CAAK,UAAA,EAAW;AAAA,MAChC,WAAA,EAAa,EAAE,GAAG,IAAA,CAAK,YAAA;AAAa,KACvC,CAAA;AAED,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA,EAMO,YAAA,GACP;AACI,IAAA,OAAO,IAAA,CAAK,UAAA;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMO,cAAA,GACP;AACI,IAAA,IAAA,CAAK,WAAW,QAAA,EAAS;AAEzB,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,OAAO,KAAA,EACd;AACI,IAAA,IAAA,CAAK,UAAA,CAAW,OAAO,KAAK,CAAA;AAE5B,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQO,KAAA,CAAM,CAAA,EAAW,CAAA,GAAY,CAAA,EACpC;AACI,IAAA,IAAA,CAAK,UAAA,CAAW,KAAA,CAAM,CAAA,EAAG,CAAC,CAAA;AAE1B,IAAA,OAAO,IAAA;AAAA,EACX;AAAA,EAqBO,aAAa,CAAA,EAAoB,CAAA,EAAY,CAAA,EAAY,CAAA,EAAY,IAAa,EAAA,EACzF;AACI,IAAA,IAAI,aAAaT,aAAA,EACjB;AACI,MAAA,IAAA,CAAK,UAAA,CAAW,GAAA,CAAI,CAAA,CAAE,CAAA,EAAG,CAAA,CAAE,CAAA,EAAG,CAAA,CAAE,CAAA,EAAG,CAAA,CAAE,CAAA,EAAG,CAAA,CAAE,EAAA,EAAI,EAAE,EAAE,CAAA;AAElD,MAAA,OAAO,IAAA;AAAA,IACX;AAEA,IAAA,IAAA,CAAK,WAAW,GAAA,CAAI,CAAA,EAAG,GAAG,CAAA,EAAG,CAAA,EAAG,IAAI,EAAE,CAAA;AAEtC,IAAA,OAAO,IAAA;AAAA,EACX;AAAA,EAqBO,UAAU,CAAA,EAAoB,CAAA,EAAY,CAAA,EAAY,CAAA,EAAY,IAAa,EAAA,EACtF;AACI,IAAA,IAAI,aAAaA,aAAA,EACjB;AACI,MAAA,IAAA,CAAK,UAAA,CAAW,OAAO,CAAC,CAAA;AAExB,MAAA,OAAO,IAAA;AAAA,IACX;AAEA,IAAA,UAAA,CAAW,IAAI,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,IAAI,EAAE,CAAA;AACjC,IAAA,IAAA,CAAK,UAAA,CAAW,OAAO,UAAU,CAAA;AAEjC,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQO,SAAA,CAAU,CAAA,EAAW,CAAA,GAAY,CAAA,EACxC;AACI,IAAA,IAAA,CAAK,UAAA,CAAW,SAAA,CAAU,CAAA,EAAG,CAAC,CAAA;AAE9B,IAAA,OAAO,IAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,KAAA,GACP;AACI,IAAA,IAAA,CAAK,YAAY,KAAA,EAAM;AACvB,IAAA,IAAA,CAAK,aAAa,MAAA,GAAS,CAAA;AAC3B,IAAA,IAAA,CAAK,cAAA,EAAe;AAEpB,IAAA,IAAA,CAAK,QAAA,EAAS;AAEd,IAAA,OAAO,IAAA;AAAA,EACX;AAAA,EAEU,QAAA,GACV;AAGI,IAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AAIpB,IAAA,IAAI,KAAK,KAAA,EAAO;AAChB,IAAA,IAAA,CAAK,IAAA,CAAK,QAAA,EAAU,IAAA,EAAM,EAAI,CAAA;AAC9B,IAAA,IAAA,CAAK,KAAA,GAAQ,IAAA;AAAA,EACjB;AAAA;AAAA,EAGA,IAAI,MAAA,GACJ;AACI,IAAA,IAAI,CAAC,IAAA,CAAK,YAAA,EAAc,OAAO,IAAA,CAAK,OAAA;AAEpC,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AAGpB,IAAA,MAAM,SAAS,IAAA,CAAK,OAAA;AAEpB,IAAA,MAAA,CAAO,KAAA,EAAM;AAEb,IAAA,KAAA,IAAS,IAAI,CAAA,EAAG,CAAA,GAAI,IAAA,CAAK,YAAA,CAAa,QAAQ,CAAA,EAAA,EAC9C;AACI,MAAA,MAAM,WAAA,GAAc,IAAA,CAAK,YAAA,CAAa,CAAC,CAAA;AACvC,MAAA,MAAM,SAAS,WAAA,CAAY,MAAA;AAE3B,MAAA,IAAI,WAAW,MAAA,EACf;AACI,QAAA,MAAM,OAAO,WAAA,CAAY,IAAA;AAEzB,QAAA,MAAA,CAAO,SAAA,CAAU,IAAA,CAAK,IAAA,CAAK,MAAM,CAAA;AAAA,MACrC,CAAA,MAAA,IACS,WAAW,SAAA,EACpB;AACI,QAAA,MAAM,OAAO,WAAA,CAAY,IAAA;AAEzB,QAAA,MAAA,CAAO,QAAA,CAAS,IAAA,CAAK,EAAA,EAAI,IAAA,CAAK,IAAI,IAAA,CAAK,EAAA,GAAK,IAAA,CAAK,EAAA,EAAI,IAAA,CAAK,EAAA,GAAK,IAAA,CAAK,EAAA,EAAI,KAAK,SAAS,CAAA;AAAA,MAC1F;AACA,MAAA,IAAI,WAAW,QAAA,EACf;AACI,QAAA,MAAM,OAAO,WAAA,CAAY,IAAA;AAEzB,QAAA,MAAM,SAAA,GAAY,KAAK,KAAA,CAAM,SAAA;AAE7B,QAAA,MAAM,YAAA,GAAgB,IAAA,CAAK,KAAA,CAAM,KAAA,IAAS,CAAA,GAAI,SAAA,CAAA;AAE9C,QAAA,MAAM,OAAA,GAAU,KAAK,IAAA,CAAK,MAAA;AAE1B,QAAA,MAAA,CAAO,QAAA;AAAA,UACH,QAAQ,IAAA,GAAO,YAAA;AAAA,UACf,QAAQ,IAAA,GAAO,YAAA;AAAA,UACf,QAAQ,IAAA,GAAO,YAAA;AAAA,UACf,QAAQ,IAAA,GAAO;AAAA,SACnB;AAAA,MACJ;AAAA,IACJ;AAEA,IAAA,OAAO,MAAA;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOO,cAAc,KAAA,EACrB;AAEI,IAAA,IAAI,CAAC,KAAK,MAAA,CAAO,aAAA,CAAc,MAAM,CAAA,EAAG,KAAA,CAAM,CAAC,CAAA,EAAG,OAAO,KAAA;AAEzD,IAAA,MAAM,eAAe,IAAA,CAAK,YAAA;AAC1B,IAAA,IAAI,MAAA,GAAS,KAAA;AAEb,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,YAAA,CAAa,QAAQ,CAAA,EAAA,EACzC;AACI,MAAA,MAAM,WAAA,GAAc,aAAa,CAAC,CAAA;AAElC,MAAA,MAAM,OAAO,WAAA,CAAY,IAAA;AACzB,MAAA,MAAM,OAAO,IAAA,CAAK,IAAA;AAElB,MAAA,IAAI,CAAC,WAAA,CAAY,MAAA,IAAU,CAAC,IAAA,EAAM;AAElC,MAAA,MAAM,QAAQ,IAAA,CAAK,KAAA;AACnB,MAAA,MAAM,MAAA,GAAS,KAAK,SAAA,CAAU,eAAA;AAE9B,MAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,MAAA,CAAO,QAAQ,CAAA,EAAA,EACnC;AACI,QAAA,MAAM,KAAA,GAAQ,MAAA,CAAO,CAAC,CAAA,CAAE,KAAA;AAExB,QAAA,IAAI,CAAC,KAAA,IAAS,CAAC,KAAA,EAAO;AAEtB,QAAA,MAAM,SAAA,GAAY,MAAA,CAAO,CAAC,CAAA,CAAE,SAAA;AAE5B,QAAA,MAAM,mBAAmB,SAAA,GAAY,SAAA,CAAU,YAAA,CAAa,KAAA,EAAO,QAAQ,CAAA,GAAI,KAAA;AAE/E,QAAA,IAAI,WAAA,CAAY,WAAW,MAAA,EAC3B;AACI,UAAA,MAAA,GAAS,KAAA,CAAM,QAAA,CAAS,gBAAA,CAAiB,CAAA,EAAG,iBAAiB,CAAC,CAAA;AAAA,QAClE,CAAA,MAEA;AACI,UAAA,MAAM,WAAA,GAAe,KAAA;AAErB,UAAA,MAAA,GAAS,KAAA,CAAM,eAAe,gBAAA,CAAiB,CAAA,EAAG,iBAAiB,CAAA,EAAG,WAAA,CAAY,KAAA,EAAO,WAAA,CAAY,SAAS,CAAA;AAAA,QAClH;AAEA,QAAA,MAAM,QAAQ,IAAA,CAAK,IAAA;AAEnB,QAAA,IAAI,KAAA,EACJ;AACI,UAAA,MAAM,UAAA,GAAa,MAAM,SAAA,EAAW,eAAA;AAEpC,UAAA,IAAI,UAAA,EACJ;AACI,YAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,UAAA,CAAW,QAAQ,CAAA,EAAA,EACvC;AACI,cAAA,IAAI,UAAA,CAAW,CAAC,CAAA,CAAE,KAAA,CAAM,SAAS,gBAAA,CAAiB,CAAA,EAAG,gBAAA,CAAiB,CAAC,CAAA,EACvE;AACI,gBAAA,MAAA,GAAS,KAAA;AAAA,cACb;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAEA,QAAA,IAAI,MAAA,EACJ;AACI,UAAA,OAAO,IAAA;AAAA,QACX;AAAA,MACJ;AAAA,IACJ;AAEA,IAAA,OAAO,MAAA;AAAA,EACX;AAAA;AAAA,EAGO,MAAA,GACP;AACI,IAAA,IAAA,CAAK,IAAA,CAAK,UAAU,IAAI,CAAA;AACxB,IAAA,KAAA,MAAW,GAAA,IAAO,KAAK,QAAA,EACvB;AACI,MAAA,IAAA,CAAK,QAAA,CAAS,GAAG,CAAA,EAAG,OAAA,EAAQ;AAAA,IAChC;AACA,IAAA,IAAA,CAAK,QAAA,mBAAW,MAAA,CAAO,MAAA,CAAO,IAAI,CAAA;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWO,OAAA,CAAQ,UAA6C,KAAA,EAC5D;AACI,IAAA,IAAI,KAAK,SAAA,EAAW;AACpB,IAAA,IAAA,CAAK,SAAA,GAAY,IAAA;AACjB,IAAA,IAAA,CAAK,YAAY,MAAA,GAAS,CAAA;AAC1B,IAAA,IAAA,CAAK,UAAA,GAAa,IAAA;AAElB,IAAA,IAAA,CAAK,MAAA,EAAO;AACZ,IAAA,IAAA,CAAK,IAAA,CAAK,WAAW,IAAI,CAAA;AACzB,IAAA,IAAA,CAAK,kBAAA,EAAmB;AAExB,IAAA,MAAM,cAAA,GAAiB,OAAO,OAAA,KAAY,SAAA,GAAY,UAAU,OAAA,EAAS,OAAA;AAEzE,IAAA,IAAI,cAAA,EACJ;AACI,MAAA,MAAM,oBAAA,GAAuB,OAAO,OAAA,KAAY,SAAA,GAAY,UAAU,OAAA,EAAS,aAAA;AAE/E,MAAA,IAAI,IAAA,CAAK,WAAW,OAAA,EACpB;AACI,QAAA,IAAA,CAAK,UAAA,CAAW,IAAA,IAAQ,KAAA,IAAS,IAAA,CAAK,WAAW,IAAA,GAC3C,IAAA,CAAK,UAAA,CAAW,IAAA,CAAK,SAAQ,GAC7B,IAAA,CAAK,UAAA,CAAW,OAAA,CAAQ,QAAQ,oBAAoB,CAAA;AAAA,MAC9D;AAEA,MAAA,IAAI,IAAA,CAAK,aAAa,OAAA,EACtB;AACI,QAAA,IAAA,CAAK,YAAA,CAAa,IAAA,IAAQ,KAAA,IAAS,IAAA,CAAK,aAAa,IAAA,GAC/C,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,SAAQ,GAC/B,IAAA,CAAK,YAAA,CAAa,OAAA,CAAQ,QAAQ,oBAAoB,CAAA;AAAA,MAChE;AAAA,IACJ;AAEA,IAAA,IAAA,CAAK,UAAA,GAAa,IAAA;AAClB,IAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AAEpB,IAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AACpB,IAAA,IAAA,CAAK,WAAA,GAAc,IAAA;AACnB,IAAA,IAAA,CAAK,OAAA,GAAU,IAAA;AACf,IAAA,IAAA,CAAK,WAAA,GAAc,IAAA;AACnB,IAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AACpB,IAAA,IAAA,CAAK,UAAA,GAAa,IAAA;AAAA,EACtB;AACJ,CAAA;AAAA;AA5qCa,gBAAA,CAgBK,gBAAA,GAAuC;AAAA;AAAA,EAEjD,KAAA,EAAO,QAAA;AAAA;AAAA,EAEP,KAAA,EAAO,CAAA;AAAA;AAAA,EAEP,SAASU,eAAA,CAAQ,KAAA;AAAA;AAAA,EAEjB,MAAA,EAAQ,IAAA;AAAA;AAAA,EAER,IAAA,EAAM,IAAA;AAAA;AAAA,EAEN,YAAA,EAAc;AAClB,CAAA;AAAA;AA7BS,gBAAA,CAgCK,kBAAA,GAA2C;AAAA;AAAA,EAErD,KAAA,EAAO,CAAA;AAAA;AAAA,EAEP,KAAA,EAAO,QAAA;AAAA;AAAA,EAEP,KAAA,EAAO,CAAA;AAAA;AAAA,EAEP,SAAA,EAAW,GAAA;AAAA;AAAA,EAEX,UAAA,EAAY,EAAA;AAAA;AAAA,EAEZ,GAAA,EAAK,MAAA;AAAA;AAAA,EAEL,IAAA,EAAM,OAAA;AAAA;AAAA,EAEN,SAASA,eAAA,CAAQ,KAAA;AAAA;AAAA,EAEjB,MAAA,EAAQ,IAAA;AAAA;AAAA,EAER,IAAA,EAAM,IAAA;AAAA;AAAA,EAEN,YAAA,EAAc,OAAA;AAAA;AAAA,EAEd,SAAA,EAAW;AACf,CAAA;AAzDG,IAAM,eAAA,GAAN;;;;"}