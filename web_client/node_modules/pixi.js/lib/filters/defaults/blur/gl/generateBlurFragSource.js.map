{"version":3,"file":"generateBlurFragSource.js","sources":["../../../../../src/filters/defaults/blur/gl/generateBlurFragSource.ts"],"sourcesContent":["import { GAUSSIAN_VALUES } from '../const';\n\nconst fragTemplate = [\n    'in vec2 vBlurTexCoords[%size%];',\n    'uniform sampler2D uTexture;',\n    'out vec4 finalColor;',\n\n    'void main(void)',\n    '{',\n    '    finalColor = vec4(0.0);',\n    '    %blur%',\n    '}',\n\n].join('\\n');\n\n/**\n * @internal\n * @param kernelSize - The size of the kernel.\n */\nexport function generateBlurFragSource(kernelSize: number): string\n{\n    const kernel = GAUSSIAN_VALUES[kernelSize];\n    const halfLength = kernel.length;\n\n    let fragSource = fragTemplate;\n\n    let blurLoop = '';\n    const template = 'finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;';\n    let value: number;\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        let blur = template.replace('%index%', i.toString());\n\n        value = i;\n\n        if (i >= halfLength)\n        {\n            value = kernelSize - i - 1;\n        }\n\n        blur = blur.replace('%value%', kernel[value].toString());\n\n        blurLoop += blur;\n        blurLoop += '\\n';\n    }\n\n    fragSource = fragSource.replace('%blur%', blurLoop);\n    fragSource = fragSource.replace('%size%', kernelSize.toString());\n\n    return fragSource;\n}\n"],"names":["GAUSSIAN_VALUES"],"mappings":";;;;;AAEA,MAAM,YAAA,GAAe;AAAA,EACjB,iCAAA;AAAA,EACA,6BAAA;AAAA,EACA,sBAAA;AAAA,EAEA,iBAAA;AAAA,EACA,GAAA;AAAA,EACA,6BAAA;AAAA,EACA,YAAA;AAAA,EACA;AAEJ,CAAA,CAAE,KAAK,IAAI,CAAA;AAMJ,SAAS,uBAAuB,UAAA,EACvC;AACI,EAAA,MAAM,MAAA,GAASA,uBAAgB,UAAU,CAAA;AACzC,EAAA,MAAM,aAAa,MAAA,CAAO,MAAA;AAE1B,EAAA,IAAI,UAAA,GAAa,YAAA;AAEjB,EAAA,IAAI,QAAA,GAAW,EAAA;AACf,EAAA,MAAM,QAAA,GAAW,qEAAA;AACjB,EAAA,IAAI,KAAA;AAEJ,EAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,UAAA,EAAY,CAAA,EAAA,EAChC;AACI,IAAA,IAAI,OAAO,QAAA,CAAS,OAAA,CAAQ,SAAA,EAAW,CAAA,CAAE,UAAU,CAAA;AAEnD,IAAA,KAAA,GAAQ,CAAA;AAER,IAAA,IAAI,KAAK,UAAA,EACT;AACI,MAAA,KAAA,GAAQ,aAAa,CAAA,GAAI,CAAA;AAAA,IAC7B;AAEA,IAAA,IAAA,GAAO,KAAK,OAAA,CAAQ,SAAA,EAAW,OAAO,KAAK,CAAA,CAAE,UAAU,CAAA;AAEvD,IAAA,QAAA,IAAY,IAAA;AACZ,IAAA,QAAA,IAAY,IAAA;AAAA,EAChB;AAEA,EAAA,UAAA,GAAa,UAAA,CAAW,OAAA,CAAQ,QAAA,EAAU,QAAQ,CAAA;AAClD,EAAA,UAAA,GAAa,UAAA,CAAW,OAAA,CAAQ,QAAA,EAAU,UAAA,CAAW,UAAU,CAAA;AAE/D,EAAA,OAAO,UAAA;AACX;;;;"}