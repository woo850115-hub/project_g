{"version":3,"file":"mapWebGLBlendModesToPixi.mjs","sources":["../../../../../src/rendering/renderers/gl/state/mapWebGLBlendModesToPixi.ts"],"sourcesContent":["import { DOMAdapter } from '../../../../environment/adapter';\n\nimport type { BLEND_MODES } from '../../shared/state/const';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\n\n/**\n * Maps gl blend combinations to WebGL.\n * @param gl\n * @returns {object} Map of gl blend combinations to WebGL.\n * @internal\n */\nexport function mapWebGLBlendModesToPixi(gl: GlRenderingContext): Record<BLEND_MODES, number[]>\n{\n    const blendMap: Partial<Record<BLEND_MODES, number[]>> = {};\n\n    // TODO - premultiply alpha would be different.\n    // add a boolean for that!\n    blendMap.normal = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap.add = [gl.ONE, gl.ONE];\n    blendMap.multiply = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap.screen = [gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap.none = [0, 0];\n\n    // not-premultiplied blend modes\n    blendMap['normal-npm'] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap['add-npm'] = [gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE];\n    blendMap['screen-npm'] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n\n    blendMap.erase = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n\n    const isWebGl2 = !(gl instanceof DOMAdapter.get().getWebGLRenderingContext());\n\n    if (isWebGl2)\n    {\n        blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MIN, gl.MIN];\n        blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MAX, gl.MAX];\n    }\n    else\n    {\n        const ext = gl.getExtension('EXT_blend_minmax');\n\n        if (ext)\n        {\n            blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MIN_EXT, ext.MIN_EXT];\n            blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MAX_EXT, ext.MAX_EXT];\n        }\n    }\n\n    // TODO - implement if requested!\n    // composite operations\n    // array[BLEND_MODES.SRC_IN] = [gl.DST_ALPHA, gl.ZERO];\n    // array[BLEND_MODES.SRC_OUT] = [gl.ONE_MINUS_DST_ALPHA, gl.ZERO];\n    // array[BLEND_MODES.SRC_ATOP] = [gl.DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\n    // array[BLEND_MODES.DST_OVER] = [gl.ONE_MINUS_DST_ALPHA, gl.ONE];\n    // array[BLEND_MODES.DST_IN] = [gl.ZERO, gl.SRC_ALPHA];\n    // array[BLEND_MODES.DST_OUT] = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n    // array[BLEND_MODES.DST_ATOP] = [gl.ONE_MINUS_DST_ALPHA, gl.SRC_ALPHA];\n    // array[BLEND_MODES.XOR] = [gl.ONE_MINUS_DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\n    // SUBTRACT from flash\n    // array[BLEND_MODES.SUBTRACT] = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.FUNC_REVERSE_SUBTRACT, gl.FUNC_ADD];\n\n    return blendMap as Record<BLEND_MODES, number[]>;\n}\n"],"names":[],"mappings":";;;AAWO,SAAS,yBAAyB,EAAA,EACzC;AACI,EAAA,MAAM,WAAmD,EAAC;AAI1D,EAAA,QAAA,CAAS,MAAA,GAAS,CAAC,EAAA,CAAG,GAAA,EAAK,GAAG,mBAAmB,CAAA;AACjD,EAAA,QAAA,CAAS,GAAA,GAAM,CAAC,EAAA,CAAG,GAAA,EAAK,GAAG,GAAG,CAAA;AAC9B,EAAA,QAAA,CAAS,QAAA,GAAW,CAAC,EAAA,CAAG,SAAA,EAAW,GAAG,mBAAA,EAAqB,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,mBAAmB,CAAA;AACzF,EAAA,QAAA,CAAS,MAAA,GAAS,CAAC,EAAA,CAAG,GAAA,EAAK,GAAG,mBAAA,EAAqB,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,mBAAmB,CAAA;AACjF,EAAA,QAAA,CAAS,IAAA,GAAO,CAAC,CAAA,EAAG,CAAC,CAAA;AAGrB,EAAA,QAAA,CAAS,YAAY,CAAA,GAAI,CAAC,EAAA,CAAG,SAAA,EAAW,GAAG,mBAAA,EAAqB,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,mBAAmB,CAAA;AAC9F,EAAA,QAAA,CAAS,SAAS,CAAA,GAAI,CAAC,EAAA,CAAG,SAAA,EAAW,GAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAG,CAAA;AAC3D,EAAA,QAAA,CAAS,YAAY,CAAA,GAAI,CAAC,EAAA,CAAG,SAAA,EAAW,GAAG,mBAAA,EAAqB,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,mBAAmB,CAAA;AAE9F,EAAA,QAAA,CAAS,KAAA,GAAQ,CAAC,EAAA,CAAG,IAAA,EAAM,GAAG,mBAAmB,CAAA;AAEjD,EAAA,MAAM,WAAW,EAAE,EAAA,YAAc,UAAA,CAAW,GAAA,GAAM,wBAAA,EAAyB,CAAA;AAE3E,EAAA,IAAI,QAAA,EACJ;AACI,IAAA,QAAA,CAAS,GAAA,GAAM,CAAC,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,GAAG,GAAG,CAAA;AAC9D,IAAA,QAAA,CAAS,GAAA,GAAM,CAAC,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,GAAG,GAAG,CAAA;AAAA,EAClE,CAAA,MAEA;AACI,IAAA,MAAM,GAAA,GAAM,EAAA,CAAG,YAAA,CAAa,kBAAkB,CAAA;AAE9C,IAAA,IAAI,GAAA,EACJ;AACI,MAAA,QAAA,CAAS,GAAA,GAAM,CAAC,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,GAAA,CAAI,OAAA,EAAS,IAAI,OAAO,CAAA;AACxE,MAAA,QAAA,CAAS,GAAA,GAAM,CAAC,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,EAAA,CAAG,GAAA,EAAK,GAAA,CAAI,OAAA,EAAS,IAAI,OAAO,CAAA;AAAA,IAC5E;AAAA,EACJ;AAeA,EAAA,OAAO,QAAA;AACX;;;;"}