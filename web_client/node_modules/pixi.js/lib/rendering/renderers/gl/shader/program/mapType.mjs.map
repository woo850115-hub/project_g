{"version":3,"file":"mapType.mjs","sources":["../../../../../../src/rendering/renderers/gl/shader/program/mapType.ts"],"sourcesContent":["import type { Dict } from '../../../../../utils/types';\nimport type { VertexFormat } from '../../../shared/geometry/const';\n\nlet GL_TABLE: Dict<string> = null;\n\nconst GL_TO_GLSL_TYPES: Dict<string> = {\n    FLOAT:       'float',\n    FLOAT_VEC2:  'vec2',\n    FLOAT_VEC3:  'vec3',\n    FLOAT_VEC4:  'vec4',\n\n    INT:         'int',\n    INT_VEC2:    'ivec2',\n    INT_VEC3:    'ivec3',\n    INT_VEC4:    'ivec4',\n\n    UNSIGNED_INT:         'uint',\n    UNSIGNED_INT_VEC2:    'uvec2',\n    UNSIGNED_INT_VEC3:    'uvec3',\n    UNSIGNED_INT_VEC4:    'uvec4',\n\n    BOOL:        'bool',\n    BOOL_VEC2:   'bvec2',\n    BOOL_VEC3:   'bvec3',\n    BOOL_VEC4:   'bvec4',\n\n    FLOAT_MAT2:  'mat2',\n    FLOAT_MAT3:  'mat3',\n    FLOAT_MAT4:  'mat4',\n\n    SAMPLER_2D:              'sampler2D',\n    INT_SAMPLER_2D:          'sampler2D',\n    UNSIGNED_INT_SAMPLER_2D: 'sampler2D',\n    SAMPLER_CUBE:              'samplerCube',\n    INT_SAMPLER_CUBE:          'samplerCube',\n    UNSIGNED_INT_SAMPLER_CUBE: 'samplerCube',\n    SAMPLER_2D_ARRAY:              'sampler2DArray',\n    INT_SAMPLER_2D_ARRAY:          'sampler2DArray',\n    UNSIGNED_INT_SAMPLER_2D_ARRAY: 'sampler2DArray',\n};\n\nconst GLSL_TO_VERTEX_TYPES: Record<string, VertexFormat> = {\n\n    float: 'float32',\n    vec2: 'float32x2',\n    vec3: 'float32x3',\n    vec4: 'float32x4',\n\n    int: 'sint32',\n    ivec2: 'sint32x2',\n    ivec3: 'sint32x3',\n    ivec4: 'sint32x4',\n\n    uint: 'uint32',\n    uvec2: 'uint32x2',\n    uvec3: 'uint32x3',\n    uvec4: 'uint32x4',\n\n    bool: 'uint32',\n    bvec2: 'uint32x2',\n    bvec3: 'uint32x3',\n    bvec4: 'uint32x4',\n};\n\n/**\n * @param gl\n * @param type\n * @internal\n */\nexport function mapType(gl: any, type: number): string\n{\n    if (!GL_TABLE)\n    {\n        const typeNames = Object.keys(GL_TO_GLSL_TYPES);\n\n        GL_TABLE = {};\n\n        for (let i = 0; i < typeNames.length; ++i)\n        {\n            const tn = typeNames[i];\n\n            GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\n        }\n    }\n\n    return GL_TABLE[type];\n}\n\n/**\n * @param gl\n * @param type\n * @internal\n */\nexport function mapGlToVertexFormat(gl: any, type: number): VertexFormat\n{\n    const typeValue = mapType(gl, type);\n\n    return GLSL_TO_VERTEX_TYPES[typeValue] || 'float32';\n}\n"],"names":[],"mappings":";AAGA,IAAI,QAAA,GAAyB,IAAA;AAE7B,MAAM,gBAAA,GAAiC;AAAA,EACnC,KAAA,EAAa,OAAA;AAAA,EACb,UAAA,EAAa,MAAA;AAAA,EACb,UAAA,EAAa,MAAA;AAAA,EACb,UAAA,EAAa,MAAA;AAAA,EAEb,GAAA,EAAa,KAAA;AAAA,EACb,QAAA,EAAa,OAAA;AAAA,EACb,QAAA,EAAa,OAAA;AAAA,EACb,QAAA,EAAa,OAAA;AAAA,EAEb,YAAA,EAAsB,MAAA;AAAA,EACtB,iBAAA,EAAsB,OAAA;AAAA,EACtB,iBAAA,EAAsB,OAAA;AAAA,EACtB,iBAAA,EAAsB,OAAA;AAAA,EAEtB,IAAA,EAAa,MAAA;AAAA,EACb,SAAA,EAAa,OAAA;AAAA,EACb,SAAA,EAAa,OAAA;AAAA,EACb,SAAA,EAAa,OAAA;AAAA,EAEb,UAAA,EAAa,MAAA;AAAA,EACb,UAAA,EAAa,MAAA;AAAA,EACb,UAAA,EAAa,MAAA;AAAA,EAEb,UAAA,EAAyB,WAAA;AAAA,EACzB,cAAA,EAAyB,WAAA;AAAA,EACzB,uBAAA,EAAyB,WAAA;AAAA,EACzB,YAAA,EAA2B,aAAA;AAAA,EAC3B,gBAAA,EAA2B,aAAA;AAAA,EAC3B,yBAAA,EAA2B,aAAA;AAAA,EAC3B,gBAAA,EAA+B,gBAAA;AAAA,EAC/B,oBAAA,EAA+B,gBAAA;AAAA,EAC/B,6BAAA,EAA+B;AACnC,CAAA;AAEA,MAAM,oBAAA,GAAqD;AAAA,EAEvD,KAAA,EAAO,SAAA;AAAA,EACP,IAAA,EAAM,WAAA;AAAA,EACN,IAAA,EAAM,WAAA;AAAA,EACN,IAAA,EAAM,WAAA;AAAA,EAEN,GAAA,EAAK,QAAA;AAAA,EACL,KAAA,EAAO,UAAA;AAAA,EACP,KAAA,EAAO,UAAA;AAAA,EACP,KAAA,EAAO,UAAA;AAAA,EAEP,IAAA,EAAM,QAAA;AAAA,EACN,KAAA,EAAO,UAAA;AAAA,EACP,KAAA,EAAO,UAAA;AAAA,EACP,KAAA,EAAO,UAAA;AAAA,EAEP,IAAA,EAAM,QAAA;AAAA,EACN,KAAA,EAAO,UAAA;AAAA,EACP,KAAA,EAAO,UAAA;AAAA,EACP,KAAA,EAAO;AACX,CAAA;AAOO,SAAS,OAAA,CAAQ,IAAS,IAAA,EACjC;AACI,EAAA,IAAI,CAAC,QAAA,EACL;AACI,IAAA,MAAM,SAAA,GAAY,MAAA,CAAO,IAAA,CAAK,gBAAgB,CAAA;AAE9C,IAAA,QAAA,GAAW,EAAC;AAEZ,IAAA,KAAA,IAAS,IAAI,CAAA,EAAG,CAAA,GAAI,SAAA,CAAU,MAAA,EAAQ,EAAE,CAAA,EACxC;AACI,MAAA,MAAM,EAAA,GAAK,UAAU,CAAC,CAAA;AAEtB,MAAA,QAAA,CAAS,EAAA,CAAG,EAAE,CAAC,CAAA,GAAI,iBAAiB,EAAE,CAAA;AAAA,IAC1C;AAAA,EACJ;AAEA,EAAA,OAAO,SAAS,IAAI,CAAA;AACxB;AAOO,SAAS,mBAAA,CAAoB,IAAS,IAAA,EAC7C;AACI,EAAA,MAAM,SAAA,GAAY,OAAA,CAAQ,EAAA,EAAI,IAAI,CAAA;AAElC,EAAA,OAAO,oBAAA,CAAqB,SAAS,CAAA,IAAK,SAAA;AAC9C;;;;"}