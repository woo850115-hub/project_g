{"version":3,"file":"ensureIsBuffer.mjs","sources":["../../../../../../src/rendering/renderers/shared/geometry/utils/ensureIsBuffer.ts"],"sourcesContent":["import { Buffer } from '../../buffer/Buffer';\nimport { BufferUsage } from '../../buffer/const';\n\nimport type { TypedArray } from '../../buffer/Buffer';\n\n/**\n * Converts something into a buffer. If it is already a buffer it will pass it through\n * if it is a number array it will convert it to a float32 array before being passed into a buffer\n * the buffer will be created with the correct usage flags for geometry attributes\n * @param buffer - number array\n * @param index - is this an index buffer?\n * @returns a buffer\n * @category rendering\n * @internal\n */\nexport function ensureIsBuffer(buffer: Buffer | TypedArray | number[], index: boolean): Buffer\n{\n    if (!(buffer instanceof Buffer))\n    {\n        let usage: number = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n\n        // its an array!\n        if (buffer instanceof Array)\n        {\n            if (index)\n            {\n                buffer = new Uint32Array(buffer);\n                usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n            }\n\n            else\n            {\n                buffer = new Float32Array(buffer);\n                usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n            }\n        }\n\n        buffer = new Buffer({\n            data: buffer,\n            label: index ? 'index-mesh-buffer' : 'vertex-mesh-buffer',\n            usage\n        });\n    }\n\n    return buffer;\n}\n"],"names":[],"mappings":";;;;AAeO,SAAS,cAAA,CAAe,QAAwC,KAAA,EACvE;AACI,EAAA,IAAI,EAAE,kBAAkB,MAAA,CAAA,EACxB;AACI,IAAA,IAAI,KAAA,GAAgB,KAAA,GAAQ,WAAA,CAAY,KAAA,GAAQ,WAAA,CAAY,MAAA;AAG5D,IAAA,IAAI,kBAAkB,KAAA,EACtB;AACI,MAAA,IAAI,KAAA,EACJ;AACI,QAAA,MAAA,GAAS,IAAI,YAAY,MAAM,CAAA;AAC/B,QAAA,KAAA,GAAQ,WAAA,CAAY,QAAQ,WAAA,CAAY,QAAA;AAAA,MAC5C,CAAA,MAGA;AACI,QAAA,MAAA,GAAS,IAAI,aAAa,MAAM,CAAA;AAChC,QAAA,KAAA,GAAQ,WAAA,CAAY,SAAS,WAAA,CAAY,QAAA;AAAA,MAC7C;AAAA,IACJ;AAEA,IAAA,MAAA,GAAS,IAAI,MAAA,CAAO;AAAA,MAChB,IAAA,EAAM,MAAA;AAAA,MACN,KAAA,EAAO,QAAQ,mBAAA,GAAsB,oBAAA;AAAA,MACrC;AAAA,KACH,CAAA;AAAA,EACL;AAEA,EAAA,OAAO,MAAA;AACX;;;;"}