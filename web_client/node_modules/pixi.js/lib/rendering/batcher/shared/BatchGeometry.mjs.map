{"version":3,"file":"BatchGeometry.mjs","sources":["../../../../src/rendering/batcher/shared/BatchGeometry.ts"],"sourcesContent":["import { Buffer } from '../../renderers/shared/buffer/Buffer';\nimport { BufferUsage } from '../../renderers/shared/buffer/const';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry';\n\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\n\n/**\n * This class represents a geometry used for batching in the rendering system.\n * It defines the structure of vertex attributes and index buffers for batched rendering.\n * @category rendering\n * @advanced\n */\nexport class BatchGeometry extends Geometry\n{\n    constructor()\n    {\n        const vertexSize = 6;\n\n        const attributeBuffer = new Buffer({\n            data: placeHolderBufferData,\n            label: 'attribute-batch-buffer',\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n            shrinkToFit: false,\n        });\n\n        const indexBuffer = new Buffer({\n            data: placeHolderIndexData,\n            label: 'index-batch-buffer',\n            usage: BufferUsage.INDEX | BufferUsage.COPY_DST, // | BufferUsage.STATIC,\n            shrinkToFit: false,\n        });\n\n        const stride = vertexSize * 4;\n\n        super({\n            attributes: {\n                aPosition: {\n                    buffer: attributeBuffer,\n                    format: 'float32x2',\n                    stride,\n                    offset: 0,\n                },\n                aUV: {\n                    buffer: attributeBuffer,\n                    format: 'float32x2',\n                    stride,\n                    offset: 2 * 4,\n                },\n                aColor: {\n                    buffer: attributeBuffer,\n                    format: 'unorm8x4',\n                    stride,\n                    offset: 4 * 4,\n                },\n                aTextureIdAndRound: {\n                    buffer: attributeBuffer,\n                    format: 'uint16x2',\n                    stride,\n                    offset: 5 * 4,\n                },\n            },\n            indexBuffer\n        });\n    }\n}\n\n"],"names":[],"mappings":";;;;;AAIA,MAAM,qBAAA,GAAwB,IAAI,YAAA,CAAa,CAAC,CAAA;AAChD,MAAM,oBAAA,GAAuB,IAAI,WAAA,CAAY,CAAC,CAAA;AAQvC,MAAM,sBAAsB,QAAA,CACnC;AAAA,EACI,WAAA,GACA;AACI,IAAA,MAAM,UAAA,GAAa,CAAA;AAEnB,IAAA,MAAM,eAAA,GAAkB,IAAI,MAAA,CAAO;AAAA,MAC/B,IAAA,EAAM,qBAAA;AAAA,MACN,KAAA,EAAO,wBAAA;AAAA,MACP,KAAA,EAAO,WAAA,CAAY,MAAA,GAAS,WAAA,CAAY,QAAA;AAAA,MACxC,WAAA,EAAa;AAAA,KAChB,CAAA;AAED,IAAA,MAAM,WAAA,GAAc,IAAI,MAAA,CAAO;AAAA,MAC3B,IAAA,EAAM,oBAAA;AAAA,MACN,KAAA,EAAO,oBAAA;AAAA,MACP,KAAA,EAAO,WAAA,CAAY,KAAA,GAAQ,WAAA,CAAY,QAAA;AAAA;AAAA,MACvC,WAAA,EAAa;AAAA,KAChB,CAAA;AAED,IAAA,MAAM,SAAS,UAAA,GAAa,CAAA;AAE5B,IAAA,KAAA,CAAM;AAAA,MACF,UAAA,EAAY;AAAA,QACR,SAAA,EAAW;AAAA,UACP,MAAA,EAAQ,eAAA;AAAA,UACR,MAAA,EAAQ,WAAA;AAAA,UACR,MAAA;AAAA,UACA,MAAA,EAAQ;AAAA,SACZ;AAAA,QACA,GAAA,EAAK;AAAA,UACD,MAAA,EAAQ,eAAA;AAAA,UACR,MAAA,EAAQ,WAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,CAAA,GAAI;AAAA,SAChB;AAAA,QACA,MAAA,EAAQ;AAAA,UACJ,MAAA,EAAQ,eAAA;AAAA,UACR,MAAA,EAAQ,UAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,CAAA,GAAI;AAAA,SAChB;AAAA,QACA,kBAAA,EAAoB;AAAA,UAChB,MAAA,EAAQ,eAAA;AAAA,UACR,MAAA,EAAQ,UAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,CAAA,GAAI;AAAA;AAChB,OACJ;AAAA,MACA;AAAA,KACH,CAAA;AAAA,EACL;AACJ;;;;"}