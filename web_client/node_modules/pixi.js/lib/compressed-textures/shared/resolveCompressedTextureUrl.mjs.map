{"version":3,"file":"resolveCompressedTextureUrl.mjs","sources":["../../../src/compressed-textures/shared/resolveCompressedTextureUrl.ts"],"sourcesContent":["import { Resolver } from '../../assets/resolver/Resolver';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\n\nimport type { ResolveURLParser } from '../../assets/resolver/types';\n\n/** @internal */\nexport const validFormats = ['basis', 'bc7', 'bc6h', 'astc', 'etc2', 'bc5', 'bc4', 'bc3', 'bc2', 'bc1', 'eac'];\n\n/**\n * A parser that will resolve a compressed texture url\n * @category assets\n * @internal\n */\nexport const resolveCompressedTextureUrl = {\n    extension: ExtensionType.ResolveParser,\n    test: (value: string) =>\n        checkExtension(value, ['.ktx', '.ktx2', '.dds']),\n    parse: (value: string) =>\n    {\n        let format;\n\n        const splitValue = value.split('.');\n\n        if (splitValue.length > 2)\n        {\n            const newFormat = splitValue[splitValue.length - 2];\n\n            if (validFormats.includes(newFormat))\n            {\n                format = newFormat;\n            }\n        }\n        else\n        {\n            format = splitValue[splitValue.length - 1];\n        }\n\n        return {\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format,\n            src: value,\n        };\n    }\n} satisfies ResolveURLParser;\n"],"names":[],"mappings":";;;;;AAOO,MAAM,YAAA,GAAe,CAAC,OAAA,EAAS,KAAA,EAAO,MAAA,EAAQ,MAAA,EAAQ,MAAA,EAAQ,KAAA,EAAO,KAAA,EAAO,KAAA,EAAO,KAAA,EAAO,KAAA,EAAO,KAAK;AAOtG,MAAM,2BAAA,GAA8B;AAAA,EACvC,WAAW,aAAA,CAAc,aAAA;AAAA,EACzB,IAAA,EAAM,CAAC,KAAA,KACH,cAAA,CAAe,OAAO,CAAC,MAAA,EAAQ,OAAA,EAAS,MAAM,CAAC,CAAA;AAAA,EACnD,KAAA,EAAO,CAAC,KAAA,KACR;AACI,IAAA,IAAI,MAAA;AAEJ,IAAA,MAAM,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,GAAG,CAAA;AAElC,IAAA,IAAI,UAAA,CAAW,SAAS,CAAA,EACxB;AACI,MAAA,MAAM,SAAA,GAAY,UAAA,CAAW,UAAA,CAAW,MAAA,GAAS,CAAC,CAAA;AAElD,MAAA,IAAI,YAAA,CAAa,QAAA,CAAS,SAAS,CAAA,EACnC;AACI,QAAA,MAAA,GAAS,SAAA;AAAA,MACb;AAAA,IACJ,CAAA,MAEA;AACI,MAAA,MAAA,GAAS,UAAA,CAAW,UAAA,CAAW,MAAA,GAAS,CAAC,CAAA;AAAA,IAC7C;AAEA,IAAA,OAAO;AAAA,MACH,UAAA,EAAY,WAAW,QAAA,CAAS,aAAA,CAAc,KAAK,KAAK,CAAA,GAAI,CAAC,CAAA,IAAK,GAAG,CAAA;AAAA,MACrE,MAAA;AAAA,MACA,GAAA,EAAK;AAAA,KACT;AAAA,EACJ;AACJ;;;;"}